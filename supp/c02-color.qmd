---
title: "Raw Material Color"
---

```{r color, out.width = "100%", dpi = 300, echo=TRUE, warning=FALSE, message = FALSE}
# compare colors
library(here)
library(colordistance)
library(recolorize)
library(dplyr)
library(vegan)
library(ape)

# get image paths
images <- colordistance::getImagePaths('jowell.farm')

# generate color distance matrix
cdm <- imageClusterPipeline(images)

# export color distance matrix
write.csv(cdm, file = "gahagan_color_distance_matrix.csv")
```

## Permutational MANOVA

```{r manova, out.width = "100%", dpi = 300, echo=TRUE}
# perMANOVA
# import color distance matrix
c.data <- read.csv("gahagan_color_distance_matrix.csv",
                   header = TRUE,
                   as.is=TRUE)

# import qual data
g.data <- read.csv("qdata.csv",
                   header = TRUE,
                   as.is=TRUE)

# preliminaries
colnames(g.data) <- c('X','site','ColorGroup') # rename columns prior to join
gahagan <- left_join(g.data, c.data, by = "X") # left join by specimen number
gahagan.dist <- gahagan[,4:15] # distance matrix
set.seed(10) # make results reproducible

# model: biface color as a function of color group
el.biface.colour <- adonis2(gahagan.dist ~ ColorGroup,
                            data = gahagan,
                            permutations = 10000,
                            method = 'bray')

## does color differ by ColorGroup?
el.biface.colour
```